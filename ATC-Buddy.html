<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATC-Buddy</title>
    <style>
        /* Basic styling for the entire page */
        body {
            background-color: #0d1117; /* dark mode background color */
            color: #c9d1d9; /* dark mode text color */
            font-family: Arial, sans-serif; /* Default font */
            margin: 0; /* Remove default margin */
            padding: 0; /* Remove default padding */
        }

        /* Styling for the navigation menu */
        nav {
            background-color: #161b22; /* Darker background for the nav */
            padding: 1em; /* Padding inside the nav */
        }

        nav a {
            color: #58a6ff; /* Link color */
            margin-right: 1em; /* Space between links */
            text-decoration: none; /* Remove underline from links */
        }

        nav a:hover {
            text-decoration: underline; /* Underline links on hover */
        }

        /* Dropdown menu styling */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #161b22;
            min-width: 160px;
            z-index: 1;
        }

        .dropdown-content a {
            color: #58a6ff;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #0d1117;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        /* Hide all sections by default */
        section {
            display: none;
            padding: 1em;
        }

        /* Show the active section */
        section.active {
            display: block;
        }

        /* Style for input boxes */
        input[type="number"] {
            background-color: #21262d;
            color: #c9d1d9;
            border: 1px solid #30363d;
            padding: 0.5em;
            margin: 0.5em 0;
            width: calc(100% - 1em);
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #58a6ff;
        }

        button {
            background-color: #21262d;
            color: #c9d1d9;
            border: 1px solid #30363d;
            padding: 0.5em 1em;
            cursor: pointer;
        }

        button:hover {
            background-color: #30363d;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid #30363d;
        }

        th, td {
            padding: 0.5em;
            text-align: center;
        }
    </style>

    <!-- Scripts Area -->
    <script>
        // Current Version Number of this file
        const versionNumber = '0.0.2';

        // Function to show a specific section
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('section');
            sections.forEach(section => section.classList.remove('active'));

            // Show the selected section
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
            }
        }

        // Function to calculate Miles-in-Trail by Speed
        function calculateSeparation() {
            // Get form values
            const leadSpeed = parseFloat(document.getElementById('lead-speed').value);
            const trailSpeed = parseFloat(document.getElementById('trail-speed').value);
            const distance = parseFloat(document.getElementById('distance').value);
            const time = parseFloat(document.getElementById('time').value);

            // Calculate distances covered in the given time
            const leadDistance = leadSpeed * (time / 60);
            const trailDistance = trailSpeed * (time / 60);

            // Determine new separation distance
            const closingDistance = trailDistance - leadDistance;
            const newDistance = distance - closingDistance;

            // Determine which aircraft is ahead and by how much
            let result = '';
            if (newDistance > 0) {
                result = `In ${time} minutes, the lead aircraft will be ahead by ${newDistance.toFixed(2)} miles.`;
            } else if (newDistance < 0) {
                result = `In ${time} minutes, the trailing aircraft will be ahead by ${Math.abs(newDistance).toFixed(2)} miles.`;
            } else {
                result = `In ${time} minutes, both aircraft will be at the same position.`;
            }

            // Display the result
            document.getElementById('mit-spd-result').textContent = result;
        }

        // Function to calculate top of descent
        function calculateTopOfDescent() {
            // Get form values
            const currentAlt = parseFloat(document.getElementById('current-alt').value);
            const targetAlt = parseFloat(document.getElementById('target-alt').value);

            // Calculate the Top Of Descent Distance
            let todDistance = ((currentAlt - targetAlt) * 3) / 10;
            if (targetAlt < 100 && currentAlt >= 100) {
                todDistance += 10;
            }

            // Display the result
            document.getElementById('tod-result').textContent = 
                `The Top-of-Descent is ${todDistance.toFixed(2)} miles from the target altitude point.`;
        }

        // Function to calculate In-Trail by Vector
        function calculateInTrailByVector() {
            // Get form values
            const gndSpd = parseFloat(document.getElementById('gnd-spd').value);
            const spacingNeeded = parseFloat(document.getElementById('spacing-needed').value);

            // Create the table
            let table = `<table>
                            <tr>
                                <th>VECTOR OFF COURSE (degrees)</th>
                                <th>LENGTH OF VECTOR (in min)</th>
                            </tr>`;

            for (let offCourseVectorValue = 5; offCourseVectorValue <= 90; offCourseVectorValue += 5) {
                const vectorDuration = spacingNeeded / ((offCourseVectorValue / 90) * (gndSpd / 60));
                table += `<tr>
                            <td>${offCourseVectorValue}</td>
                            <td>${vectorDuration.toFixed(1)}</td>
                          </tr>`;
            }

            table += `</table>`;

            // Display the result
            document.getElementById('it-vec-result').innerHTML = table;
        }

        // Function to update the version number on the home page
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('version').textContent = versionNumber;
        })
    </script>
</head>
<body>
    <!-- Navigation menu -->
    <nav>
        <a href="#" onclick="showSection('home')">HOME</a>

        <!-- Tools dropdown menu -->
        <div class="dropdown">
            <a href="#">TOOLS</a>
            <div class="dropdown-content">
                <a href="#" onclick="showSection('mit-spd')">MIT SPD</a>
                <a href="#" onclick="showSection('top-of-descent')">TOP OF DESCENT</a>
                <a href="#" onclick="showSection('it-vec')">IT VEC</a> <!-- New IT VEC tool link -->
            </div>
        </div>

        <!-- References dropdown menu -->
        <div class="dropdown">
            <a href="#">REFERENCES</a>
            <div class="dropdown-content">
                <a href="#" onclick="showSection('phraseology')">PHRASEOLOGY</a>
                <a href="#" onclick="showSection('7110.65')">7110.65</a>
                <a href="#" onclick="showSection('atc-coordination')">ATC COORDINATION</a>
            </div>
        </div>
    </nav>

    <!-- Main content area -->
    <div class="content">
        <!-- Home section -->
        <section id="home" class="active">
            <h1>Welcome to ATC-Buddy</h1>
            <p>This tool is designed to help VATSIM Air Traffic Controllers with various reference materials and tools.</p>
            <p>You are currently using version <span id="version"></span>.</p>
            <p><a href="https://github.com/KSanders7070/ATC-Buddy/releases" target="_blank">Check out the latest releases here</a>.</p>
        </section>

        <!-- MIT SPD section -->
        <section id="mit-spd">
            <h1>Miles-in-Trail by Speed</h1>
            <form id="mit-spd-form">
                <label for="lead-speed">Lead Aircraft Ground Speed (knots):</label>
                <input type="number" id="lead-speed" name="lead-speed" required><br>

                <label for="trail-speed">Trailing Aircraft Ground Speed (knots):</label>
                <input type="number" id="trail-speed" name="trail-speed" required><br>

                <label for="distance">Current Distance Between Aircraft (miles):</label>
                <input type="number" id="distance" name="distance" required><br>

                <label for="time">Time in the Future (minutes):</label>
                <input type="number" id="time" name="time" required><br>

                <button type="button" onclick="calculateSeparation()">Calculate Separation</button>
            </form>
            <p id="mit-spd-result"></p>
        </section>

        <!-- TOP OF DESCENT section -->
        <section id="top-of-descent">
            <h1>Top of Descent</h1>
            <form id="tod-form">
                <label for="current-alt">Current Altitude (hundreds of feet):</label>
                <input type="number" id="current-alt" name="current-alt" required><br>

                <label for="target-alt">Target Altitude (hundreds of feet):</label>
                <input type="number" id="target-alt" name="target-alt" required><br>

                <button type="button" onclick="calculateTopOfDescent()">Calculate Top of Descent</button>
            </form>
            <p id="tod-result"></p>
        </section>

        <!-- IT VEC section -->
        <section id="it-vec">
            <h1>In-Trail by Vector</h1>
            <form id="it-vec-form">
                <label for="gnd-spd">Ground Speed of In-Trail Aircraft (knots):</label>
                <input type="number" id="gnd-spd" name="gnd-spd" required><br>

                <label for="spacing-needed">Spacing Needed (miles or minutes):</label>
                <input type="number" id="spacing-needed" name="spacing-needed" required><br>

                <button type="button" onclick="calculateInTrailByVector()">Calculate Vector</button>
            </form>
            <div id="it-vec-result"></div>
        </section>

        <!-- PHRASEOLOGY section -->
        <section id="phraseology">
            <h1>Phraseology</h1>
            <p>Content for Phraseology goes here...</p>
        </section>

        <!-- 7110.65 section -->
        <section id="7110.65">
            <h1>7110.65</h1>
            <p>Content for 7110.65 goes here...</p>
        </section>

        <!-- ATC COORDINATION section -->
        <section id="atc-coordination">
            <h1>ATC Coordination</h1>
            <p>Content for ATC Coordination goes here...</p>
        </section>
    </div>
</body>
</html>
